---
export interface Props {
  title: string;
  description: string;
  keywords?: string;
  formTitle?: string;
  formCategory?: string;
  canonicalUrl?: string;
}

const { 
  title, 
  description, 
  keywords = "PDF forms, online editor, form editor, PDF editor, allform.dev",
  formTitle,
  formCategory,
  canonicalUrl
} = Astro.props;

// Generate enhanced SEO data
const fullTitle = `${title} - AllForm.dev`;
const fullDescription = `${description} | Professional online PDF form editor. Edit, fill, and sign PDF forms directly in your browser.`;
const fullKeywords = `${keywords}, ${formTitle?.toLowerCase() || ''}, ${formCategory?.toLowerCase() || ''}, online form editing, PDF form filler`;

// Generate canonical URL
const baseUrl = 'https://allform.dev';
const canonical = canonicalUrl || `${baseUrl}/pdf/${Astro.params.id}`;
---

<!doctype html>
<html lang="en">
  <head>
    <!-- Clean analytics fallback -->
    <script>
      // Clean analytics fallback - no console spam
      (function() {
        if (typeof window !== 'undefined' && !window.analytics) {
          window.analytics = {
            track: function() {},
            identify: function() {},
            page: function() {},
            group: function() {},
            alias: function() {},
            reset: function() {}
          };
        }
      })();
    </script>
    
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <!-- Favicon Package - Generated by AddFavicon.com -->
<link rel="icon" href="/favicon.ico" sizes="32x32">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="/favicon-192x192.png">
<link rel="icon" type="image/png" sizes="256x256" href="/favicon-256x256.png">
<link rel="icon" type="image/png" sizes="512x512" href="/favicon-512x512.png">
<link rel="manifest" href="/site.webmanifest">
<meta name="theme-color" content="#3b82f6">
    <!-- Primary Meta Tags -->
    <title>{fullTitle}</title>
    <meta name="title" content={fullTitle} />
    <meta name="description" content={fullDescription} />
    <meta name="keywords" content={fullKeywords} />
    <link rel="canonical" href={canonical} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonical} />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={fullDescription} />
    <meta property="og:image" content="https://allform.dev/og-image.jpg" />
    <meta property="og:site_name" content="AllForm.dev" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonical} />
    <meta name="twitter:title" content={fullTitle} />
    <meta name="twitter:description" content={fullDescription} />
    <meta name="twitter:image" content="https://allform.dev/og-image.jpg" />
    
    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow" />
    <meta name="author" content="AllForm.dev" />
    <meta name="theme-color" content="#3B82F6" />
    <meta name="msapplication-TileColor" content="#3B82F6" />
    
    <!-- Form-specific meta tags -->
    {formTitle && <meta name="form:title" content={formTitle} />}
    {formCategory && <meta name="form:category" content={formCategory} />}
    <meta name="form:type" content="PDF Form" />
    <meta name="form:editor" content="AllForm.dev" />
    
    <!-- Structured Data -->
    <script type="application/ld+json" is:inline>
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "{formTitle || title}",
        "description": "{description}",
        "url": "{canonical}",
        "mainEntity": {
          "@type": "Document",
          "name": "{formTitle || title}",
          "description": "{description}",
          "fileFormat": "application/pdf",
          "category": "{formCategory || 'Form'}",
          "editor": {
            "@type": "SoftwareApplication",
            "name": "AllForm.dev",
            "url": "https://allform.dev",
            "applicationCategory": "WebApplication"
          }
        },
        "breadcrumb": {
          "@type": "BreadcrumbList",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Home",
              "item": "https://allform.dev"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "{formCategory || 'Forms'}",
              "item": "https://allform.dev#forms"
            },
            {
              "@type": "ListItem",
              "position": 3,
              "name": "{formTitle || title}",
              "item": "{canonical}"
            }
          ]
        }
      }
    </script>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <slot />

    <!-- Favicon switcher (active/passive) -->
<script>
  const activeFavicon = "/favicon.ico";
  const passiveFavicon = "/favicon-passive-32x32.png";

  function setFavicon(url) {
    document.querySelectorAll("link[rel='icon']").forEach(el => el.remove());
    const link = document.createElement("link");
    link.rel = "icon";
    link.href = url + "?v=" + Date.now(); // cache-busting
    document.head.appendChild(link);
  }

  function updateFavicon() {
    setFavicon(document.hidden ? passiveFavicon : activeFavicon);
  }

  document.addEventListener("visibilitychange", updateFavicon);
  window.addEventListener("focus", updateFavicon);
  window.addEventListener("blur", updateFavicon);

  updateFavicon();
</script>

  </body>
</html>

<style>
  html {
    scroll-behavior: smooth;
  }
  
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }
  
  /* SEO-friendly content styling */
  .seo-content h1 {
    font-size: 2.5rem;
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 1rem;
  }
  
  .seo-content h2 {
    font-size: 2rem;
    font-weight: 600;
    line-height: 1.3;
    margin-bottom: 0.875rem;
  }
  
  .seo-content h3 {
    font-size: 1.5rem;
    font-weight: 600;
    line-height: 1.4;
    margin-bottom: 0.75rem;
  }
  
  .seo-content p {
    line-height: 1.6;
    margin-bottom: 1rem;
  }
  
  /* Ensure good contrast for accessibility */
  .seo-content a {
    color: #3B82F6;
    text-decoration: underline;
  }
  
  .seo-content a:hover {
    color: #1D4ED8;
  }
</style>
